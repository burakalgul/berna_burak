<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Berna & Burak - Sevgililer GÃ¼nÃ¼</title>
    
    <!-- PWA Support -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff4d6d">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Berna & Burak">
    <link rel="apple-touch-icon" href="favicon.svg">
    
    <!-- SEO & Social -->
    <meta name="description" content="Romantik kalp yakalama oyunu - Berna ve Burak'Ä±n aÅŸk hikayesi">
    <meta name="keywords" content="sevgililer gÃ¼nÃ¼, oyun, romantik, kalp, aÅŸk">
    
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Inline critical CSS to prevent FOUC */
        body {
            margin: 0;
            overflow: hidden;
            background: #1a0b1c;
        }
    </style>
</head>

<body>

    <div class="vignette"></div>

    <!-- STAGE 1: INTRO (Particle Heart) -->
    <div id="intro" class="intro-container">
        <!-- Canvas is now the main element here, handled by script.js -->
        <p class="click-instruction" id="intro-text" style="opacity: 0;">â¤ï¸ Kalbe Dokun</p>
    </div>

    <!-- STAGE 2: MAIN CONTENT (Hidden initially) -->
    <div id="main-content" class="hidden">

        <!-- Music Control -->
        <div class="music-control" id="music-control">
            <div class="vinyl"></div>
            <span class="music-note">ğŸµ</span>
        </div>

        <div class="card-container" data-tilt data-tilt-max="10" data-tilt-speed="400" data-tilt-glare
            data-tilt-max-glare="0.5">
            <div class="heart-container" id="heart-easter-egg">
                <!-- SVG Heart with Gradient -->
                <svg class="heart-svg" viewBox="0 0 32 29.6">
                    <defs>
                        <radialGradient id="heartGrad" cx="40%" cy="35%" r="60%">
                            <stop offset="0%" stop-color="#ff8fa3" />
                            <stop offset="50%" stop-color="#ff4d6d" />
                            <stop offset="100%" stop-color="#c9184a" />
                        </radialGradient>
                    </defs>
                    <path fill="url(#heartGrad)" d="M23.6,0c-3.4,0-6.3,2.7-7.6,5.6C14.7,2.7,11.8,0,8.4,0C3.8,0,0,3.8,0,8.4c0,9.4,9.5,11.9,16,21.2
                    c6.1-9.3,16-11.8,16-21.2C32,3.8,28.2,0,23.6,0z" />
                </svg>
                <span class="easter-egg-hint" id="easter-egg-hint">ğŸ®</span>
                <!-- Glow rings -->
                <div class="heart-ring heart-ring-1"></div>
                <div class="heart-ring heart-ring-2"></div>
            </div>

            <div class="names">
                <div class="name-wrapper">Berna</div>
                <span class="amp">&</span>
                <div class="name-wrapper">Burak</div>
            </div>

            <div class="counter-container">
                <p class="counter-title">Birlikte geÃ§irdiÄŸimiz zaman</p>
                <div id="counter" class="counter">YÃ¼kleniyor...</div>
            </div>



            <p class="message" id="message"></p>
        </div>

        <p class="envelope-hint">ğŸ’Œ Zarflara dokun :)</p>
    </div>



    <!-- GAME OVERLAY -->
    <div id="game-overlay" class="game-overlay hidden">
        
        <!-- MAIN MENU (Inside Game Overlay) -->
        <div id="main-menu" class="main-menu">
            <div class="menu-card">
                <h1 class="menu-title">â¤ï¸ Berna & Burak â¤ï¸</h1>
                <p class="menu-subtitle">Kalp Yakalama Oyunu</p>
                
                <div class="menu-buttons">
                    <button id="menu-play" class="menu-btn menu-btn-primary">
                        <span class="btn-icon">ğŸ®</span>
                        <span class="btn-text">Oyuna BaÅŸla</span>
                    </button>
                    
                    <button id="menu-stats" class="menu-btn menu-btn-secondary">
                        <span class="btn-icon">ğŸ“Š</span>
                        <span class="btn-text">Ä°statistikler</span>
                    </button>
                    
                    <button id="menu-howto" class="menu-btn menu-btn-secondary">
                        <span class="btn-icon">â“</span>
                        <span class="btn-text">NasÄ±l OynanÄ±r</span>
                    </button>
                    
                    <button id="menu-settings" class="menu-btn menu-btn-secondary">
                        <span class="btn-icon">âš™ï¸</span>
                        <span class="btn-text">Ayarlar</span>
                    </button>
                </div>
                
                <div class="menu-footer">
                    <p class="menu-version">v1.0.0</p>
                    <p class="menu-credits">Made with â¤ï¸ for Valentine's Day</p>
                    
                    <!-- PWA Install Button (shown only when installable) -->
                    <button id="install-button" class="install-button-menu" style="display: none;">
                        ğŸ“± Ana Ekrana Ekle
                    </button>
                </div>
            </div>
        </div>
        
        <!-- SETTINGS MODAL (Inside Game Overlay) -->
        <div id="settings-modal" class="modal-overlay">
            <div class="settings-card">
                <button class="modal-close" id="settings-close">âœ•</button>
                <h2 class="settings-title">âš™ï¸ Ayarlar</h2>
                
                <div class="settings-content">
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">ğŸµ</span>
                            <div class="setting-text">
                                <div class="setting-label">MÃ¼zik</div>
                                <div class="setting-desc">Arka plan mÃ¼ziÄŸi</div>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-music" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">ğŸ”Š</span>
                            <div class="setting-text">
                                <div class="setting-label">Ses Efektleri</div>
                                <div class="setting-desc">Oyun sesleri</div>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-sfx" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">ğŸ“³</span>
                            <div class="setting-text">
                                <div class="setting-label">TitreÅŸim</div>
                                <div class="setting-desc">Dokunsal geri bildirim</div>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-haptic" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">ğŸ¨</span>
                            <div class="setting-text">
                                <div class="setting-label">ParÃ§acÄ±k Efektleri</div>
                                <div class="setting-desc">GÃ¶rsel efektler (performans)</div>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-particles" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- HOW TO PLAY MODAL (Inside Game Overlay) -->
        <div id="howto-modal" class="modal-overlay">
            <div class="howto-card">
                <button class="modal-close" id="howto-close">âœ•</button>
                <h2 class="howto-title">â“ NasÄ±l OynanÄ±r</h2>
                
                <div class="howto-content">
                    <div class="howto-section">
                        <div class="howto-icon">ğŸ‘†</div>
                        <h3>Kontroller</h3>
                        <p>ParmaÄŸÄ±nÄ± kaydÄ±rarak veya fareyi hareket ettirerek Burak'Ä± kontrol et ve kalpleri yakala!</p>
                    </div>
                    
                    <div class="howto-section">
                        <div class="howto-icon">â¤ï¸</div>
                        <h3>Kalpler</h3>
                        <p><strong>â¤ï¸ KÄ±rmÄ±zÄ±:</strong> +1 puan<br>
                        <strong>ğŸ’– Pembe:</strong> +2 puan<br>
                        <strong>ğŸ’ Elmas:</strong> +5 puan<br>
                        <strong>ğŸ’” KÄ±rÄ±k:</strong> -1 can</p>
                    </div>
                    
                    <div class="howto-section">
                        <div class="howto-icon">ğŸ”¥</div>
                        <h3>Kombo Sistemi</h3>
                        <p>Arka arkaya kalp yakala ve kombo yap! Her kombo puanÄ±nÄ± artÄ±rÄ±r. KÄ±rÄ±k kalp yakalamaktan kaÃ§Ä±n!</p>
                    </div>
                    
                    <div class="howto-section">
                        <div class="howto-icon">âš”ï¸</div>
                        <h3>Boss SavaÅŸlarÄ±</h3>
                        <p>Her dalgada bir boss ile karÅŸÄ±laÅŸacaksÄ±n. Ã–zel kalpleri yakalayarak boss'a hasar ver!</p>
                    </div>
                    
                    <div class="howto-section">
                        <div class="howto-icon">ğŸ¯</div>
                        <h3>Hedef</h3>
                        <p>Her dalgada belirli bir skora ulaÅŸ ve boss'u yen. 12 dalga tamamla ve oyunu bitir!</p>
                    </div>
                </div>
            </div>
        </div>
        <button id="game-close" class="game-close-btn">âœ•</button>
        <button id="game-pause" class="game-pause-btn">â¸ï¸</button>
        
        <!-- Boss Dialogue System -->
        <div id="boss-dialogue" class="boss-dialogue hidden">
            <div class="dialogue-container">
                <div class="dialogue-character" id="dialogue-character">ğŸ‘¤</div>
                <div class="dialogue-bubble">
                    <div class="dialogue-name" id="dialogue-name">Burak</div>
                    <div class="dialogue-text" id="dialogue-text">...</div>
                </div>
            </div>
        </div>
        <div class="game-hud">
            <div class="game-hud-item">
                <span class="hud-label">CAN</span>
                <span class="hud-value" id="game-lives">â¤ï¸â¤ï¸â¤ï¸</span>
            </div>
            <div class="game-hud-item">
                <span class="hud-label">SKOR</span>
                <span class="hud-value" id="game-score">0</span>
            </div>
            <div class="game-hud-item">
                <span class="hud-label">BÃ–LÃœM</span>
                <span class="hud-value" id="game-wave">1</span>
                <span class="hud-sub-value" id="game-wave-name">TanÄ±ÅŸma</span>
            </div>
            <div class="game-hud-item">
                <span class="hud-label">KOMBO</span>
                <span class="hud-value" id="game-combo">x1</span>
            </div>
        </div>
        <div class="game-wave-banner" id="game-wave-banner"></div>

        <!-- Character GIFs (DOM-based for performance & animation) -->
        <div id="game-characters" class="game-characters">
            <img id="berna-char" src="berna.gif" alt="Berna" class="game-char berna-char">
            <img id="burak-char" src="burak.gif" alt="Burak" class="game-char burak-char">
        </div>

        <canvas id="game-canvas"></canvas>
        <!-- Tutorial Overlay -->
        <div id="game-tutorial" class="game-tutorial">
            <div class="tutorial-content">
                <div class="tutorial-icon">ğŸ‘†</div>
                <p class="tutorial-text">ParmaÄŸÄ±nÄ± kaydÄ±rarak<br>kalpleri yakala!</p>
                <p class="tutorial-sub">Ekrana dokun veya fareyi hareket ettir</p>
            </div>
        </div>
        <div id="game-paused-screen" class="game-paused-screen">
            <h2 class="paused-title">DURAKLATILDI</h2>
            <p class="paused-sub">Ne yapmak istersin?</p>
            <div class="paused-buttons">
                <button id="pause-resume" class="game-btn game-btn-primary">â–¶ï¸ Devam Et</button>
                <button id="pause-quit" class="game-btn game-btn-secondary">âŒ Ã‡Ä±k</button>
            </div>
        </div>
        <div id="game-over-screen" class="game-over-screen">
            <h2 class="game-over-title" id="game-over-title">ğŸ’” Oyun Bitti!</h2>
            <p class="game-over-score">Skorunuz: <span id="final-score">0</span></p>
            <p class="game-over-highscore" id="game-highscore-text"></p>
            <p class="game-over-wave">UlaÅŸÄ±lan BÃ¶lÃ¼m: <span id="final-wave">1</span></p>
            <div class="game-stats-grid" id="game-stats-grid">
                <div class="stat-item"><span class="stat-value" id="stat-hearts">0</span><span
                        class="stat-label">Kalp</span></div>
                <div class="stat-item"><span class="stat-value" id="stat-combo">0</span><span class="stat-label">Max
                        Kombo</span></div>
                <div class="stat-item"><span class="stat-value" id="stat-time">0s</span><span
                        class="stat-label">SÃ¼re</span></div>
                <div class="stat-item"><span class="stat-value" id="stat-bosses">0</span><span
                        class="stat-label">Boss</span></div>
            </div>
            <p class="game-over-message" id="game-over-msg"></p>
            <div class="game-over-buttons">
                <button id="game-restart" class="game-btn game-btn-primary">ğŸ”„ Tekrar Oyna</button>
                <button id="game-stats-btn" class="game-btn game-btn-secondary">ğŸ“Š Ä°statistikler</button>
                <button id="game-quit" class="game-btn game-btn-secondary">âŒ Kapat</button>
            </div>
        </div>
        
        <!-- STATS & ACHIEVEMENTS MODAL (Inside Game Overlay) -->
        <div id="stats-modal" class="modal-overlay">
            <div class="stats-card">
                <button class="modal-close" id="stats-close">âœ•</button>
                <h2 class="stats-title">ğŸ“Š Ä°statistikler & BaÅŸarÄ±mlar</h2>
                
                <div class="stats-tabs">
                    <button class="stats-tab active" data-tab="stats">Ä°statistikler</button>
                    <button class="stats-tab" data-tab="achievements">BaÅŸarÄ±mlar</button>
                </div>
                
                <div class="stats-content">
                    <!-- Stats Tab -->
                    <div class="stats-tab-content active" id="stats-tab">
                        <div class="stats-grid">
                            <div class="stat-box">
                                <div class="stat-icon">ğŸ†</div>
                                <div class="stat-value" id="total-high-score">0</div>
                                <div class="stat-label">En YÃ¼ksek Skor</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-icon">â¤ï¸</div>
                                <div class="stat-value" id="total-hearts">0</div>
                                <div class="stat-label">Toplam Kalp</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-icon">âš”ï¸</div>
                                <div class="stat-value" id="total-bosses">0</div>
                                <div class="stat-label">Boss Yenildi</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-icon">ğŸ”¥</div>
                                <div class="stat-value" id="total-combo">0</div>
                                <div class="stat-label">En Uzun Combo</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-icon">ğŸ®</div>
                                <div class="stat-value" id="total-games">0</div>
                                <div class="stat-label">Oyun SayÄ±sÄ±</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-icon">ğŸ‘‘</div>
                                <div class="stat-value" id="highest-wave">0</div>
                                <div class="stat-label">En YÃ¼ksek Dalga</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Achievements Tab -->
                    <div class="stats-tab-content" id="achievements-tab">
                        <div class="achievement-progress">
                            <div class="progress-text">
                                <span id="achievement-count">0/18</span>
                                <span id="achievement-percent">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="achievement-progress"></div>
                            </div>
                        </div>
                        <div class="achievements-list" id="achievements-list">
                            <!-- Achievements will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- LOVE NOTE MODAL (Outside Game Overlay) -->
    <div id="love-modal" class="modal-overlay">
        <div class="note-card">
            <p id="note-text" class="note-content">Seni seviyorum Ã§Ã¼nkÃ¼...</p>
            <button id="close-note" class="note-close">Kapat</button>
        </div>
    </div>

    <!-- Audio Player -->
    <audio id="bg-music" loop>
        <source src="dilerimki.mp3" type="audio/mpeg">
        TarayÄ±cÄ±nÄ±z ses elementini desteklemiyor.
    </audio>
    
    <!-- Game Music (Love-themed game music) -->
    <audio id="game-music" loop>
        <!-- Placeholder for game music - will use Web Audio API for now -->
    </audio>

    <!-- Background Canvas for Particles -->
    <canvas id="canvas"></canvas>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>
    <script src="boss-mechanics.js"></script>
    <script src="achievements.js"></script>
    <script src="script.js"></script>
</body>

</html>